image: python:3.11

cache:
  paths:
    - ~/.cache/pypoetry

before_script:
  - python --version ; pip --version
  - curl -sSL https://install.python-poetry.org | python -
  - poetry --version
  - poetry install

test:
  stage: test
  script:
    - poetry run pip install open3d
    - echo "TEST_DATA_DIR=$(pwd)/tests_data" >> $GITHUB_ENV
    - poetry run pytest

run:
  stage: build
  script:
    - python3 hello.py
  artifacts:
    paths:
      - build/*
  rules:
    - if: $CI_COMMIT_REF_NAME == $CI_DEFAULT_BRANCH

deploy:
  stage: deploy
  script: echo "Развертывание проекта"