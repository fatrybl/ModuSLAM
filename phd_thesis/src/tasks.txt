Алгоритм автоматического создания графа.

Соединительная часть
===========================================================================================
1) Получаем измерения от датчиков и обрабатываем их в соответсвующих хендлерах.

2) Копим измерения из хендлеров какое-то время для формирования кандидата:
   кандидат имеет чёткие границы начало-конец по времени и список ключевых типов измерений.


Независимая часть
============================================================================================
Понятия:
    1) "кластер" - список вершин для времени t.
       "Скрещиваем" всеми возможными способами вершины и получаем список вариантов С. где вариант - список кластеров.

    2) "связь" - структура, хранящей в себе 2 связанных кластера.

1) Разделяем измерения на дискретные и преинтегрируемые:
   Для начала к преинт. изм. относим только ИМУ, остальные к дискретным: lidar_odom, gps, prior.

2) Если в дискретных измерениях есть одометрия, начало которой в рамках кандидата,
   дробим его на 2 вершины и добавляем к дискретным измерениям.
   Получаем сортированный по времени список дискретных измерений.

3) Формируем список С всевозможных комбинаций кластеров Сi из дисркетных измерений.

4) Для каждой Сi из C формируем комбинации связей, соединяя преинтегрир. измерениями разными способами.

5) Фильтруем варианты с учетом осуществимости преинт.рёбер.
=====   Для первичной отрисовки кандидатов:
            Формируем список граф-кандидатов из всех комбинаций кластеров и связей к ним.

6) Формируем список пар. Где пара = (список кластеров, список связей).

7) Для каждой пары: из преинт. измерений формируем дискретные и добавляем в соотв. кластер.
    7.1) Те пре-инт. измерения, которые никуда не попали, запоминаем.

8) Отдельно обрабатываем ситуацию, когда 1 кластер со всеми измерения внутри.

9) Для каждого варианта из набора:

    9.1) Для каждого кластера Kj из Ci:
            для каждого измерения Zm из Kj:
              9.1.1) создаем необходим. вершины, кладем в Б/Д.
              9.1.2) ищем возможности стыковки с графом G путем поиска подходящего кластера и вершины внутри него.
                        Если нет - создаём кластер, кладем в него вершину, кладём в Б/Д.
              9.1.3) создаем ребра.

    9.2) для каждого Kj из Ci:
        9.2.1) объединяем вершины одного типа.
        9.2.2) изменяем ребра с учетом объединения.

    9.3) Оцениваем связность кандидата с графом G, отбрасываем несвязанные варианты.
    9.4) Оцениваем по остальным критериям.
    9.5) Решаем каждый вариант и смотрим Chi2.

 10) Выбираем лучший вариант.

 11) Добавляем кандидата в граф, формируя новый связный граф G, решаем, обновляем вершины.

 12) Удаляем из хранилища измерений те, что уже использованы. Осталные оставляем.
